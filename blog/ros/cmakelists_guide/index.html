
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="记录具身智能研究、机器人项目与技术博客">
      
      
        <meta name="author" content="Wentian Chen">
      
      
        <link rel="canonical" href="https://bluejade115.github.io/WentianChen.github.io/blog/ros/cmakelists_guide/">
      
      
        <link rel="prev" href="../slam_and_navigation/">
      
      
        <link rel="next" href="../../cv/yolo_guide/">
      
      
        
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.2">
    
    
      
        <title>CMakelists详解 - 陈闻天的个人博客</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.484c7ddc.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#cmakeliststxt" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../../.." title="陈闻天的个人博客" class="md-header__button md-logo" aria-label="陈闻天的个人博客" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            陈闻天的个人博客
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              CMakelists详解
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
  
    
  
  首页

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../resume/" class="md-tabs__link">
        
  
  
    
  
  个人简历

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../projects/text/" class="md-tabs__link">
          
  
  
  项目展示

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../" class="md-tabs__link">
          
  
  
  教程博客

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="陈闻天的个人博客" class="md-nav__button md-logo" aria-label="陈闻天的个人博客" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    陈闻天的个人博客
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    首页
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resume/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    个人简历
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    项目展示
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    项目展示
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../projects/text/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    test
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../projects/simpickgen/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    基于IsaacSim的CuRobo自动抓取及数据采集
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    教程博客
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    教程博客
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    博客首页
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    环境配置
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    环境配置
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../envir_config/fix_some_common_linux_bugs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    常见Linux小问题的解决方法
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../envir_config/config_apt/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    配置国内APT镜像源
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../envir_config/config_pip/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    配置Pip
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../envir_config/config_nvidia_driver/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    配置NVIDIA Driver
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../envir_config/config_cuda/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    配置CUDA
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../envir_config/config_ssh/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    配置SSH
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../envir_config/config_docker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    配置Docker
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" checked>
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    ROS
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    ROS
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config_ros/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    配置ROS
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dive_into_ros2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ROS2的深入理解
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../slam_and_navigation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SLAM和Navigation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    CMakelists详解
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    CMakelists详解
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        基础概念
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="基础概念">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#package-configuration-file" class="md-nav__link">
    <span class="md-ellipsis">
      
        Package Configuration File
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setupbash" class="md-nav__link">
    <span class="md-ellipsis">
      
        setup.bash的作用
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#find_package" class="md-nav__link">
    <span class="md-ellipsis">
      
        find_package
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="find_package">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#find_package_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        find_package的查找原理
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#find_package_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        find_package的检索过程
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        手动添加查找目录
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        验证查找到的库
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      
        环境变量
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add_dependencies" class="md-nav__link">
    <span class="md-ellipsis">
      
        add_dependencies
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#target_link_libraries" class="md-nav__link">
    <span class="md-ellipsis">
      
        target_link_libraries
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="target_link_libraries">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ros" class="md-nav__link">
    <span class="md-ellipsis">
      
        链接ROS库
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      
        链接外部库
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      
        链接自定义库
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" >
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Computer Vision
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Computer Vision
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cv/yolo_guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Yolo的全流程指南
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_5" >
        
          
          <label class="md-nav__link" for="__nav_4_5" id="__nav_4_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    大模型
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    大模型
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../model/dive_into_pytorch/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    pytorch
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        基础概念
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="基础概念">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#package-configuration-file" class="md-nav__link">
    <span class="md-ellipsis">
      
        Package Configuration File
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setupbash" class="md-nav__link">
    <span class="md-ellipsis">
      
        setup.bash的作用
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#find_package" class="md-nav__link">
    <span class="md-ellipsis">
      
        find_package
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="find_package">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#find_package_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        find_package的查找原理
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#find_package_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        find_package的检索过程
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        手动添加查找目录
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        验证查找到的库
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      
        环境变量
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add_dependencies" class="md-nav__link">
    <span class="md-ellipsis">
      
        add_dependencies
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#target_link_libraries" class="md-nav__link">
    <span class="md-ellipsis">
      
        target_link_libraries
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="target_link_libraries">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ros" class="md-nav__link">
    <span class="md-ellipsis">
      
        链接ROS库
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      
        链接外部库
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      
        链接自定义库
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="cmakeliststxt">CMakeLists.txt</h1>
<h2 id="_1">基础概念</h2>
<h3 id="package-configuration-file">Package Configuration File</h3>
<p>包配置文件通常命名为<code>YourPackageConfig.cmake</code> 或 <code>yourpackage-config.cmake</code>。它们由包的作者提供，包含了关于如何使用该包的所有必要信息，例如头文件路径、库文件路径以及它所依赖的其他包。或者名为 <code>FindYourPackage.cmake</code> 的文件。这些文件通常由用户或第三方编写，用于查找那些没有提供标准包配置文件的传统库。它们包含了一些启发式逻辑来定位库和头文件。</p>
<p>包配置文件的存储位置:如果使用安装类型的编译（即编译完一个包后，将相关文件安装到<code>your_workspace/install/your_package</code>），那么<code>*.cmake</code>通常会在<code>share/your_package/cmake</code> ，其中<code>your_workspace/install/your_package</code>称之为<strong>包的路径前缀</strong>(prefix)。</p>
<h3 id="setupbash">setup.bash的作用</h3>
<p>当终端启动后，执行工作空间的<code>setup.bash</code>后，会将工作空间内的<strong>包的路径前缀</strong>添加到变量<code>CMAKE_PREFIX_PATH</code>里。</p>
<p>确认包是否正确被添加的排查方法如下：</p>
<ol>
<li>确认包的路径前缀在变量<code>CMAKE_PREFIX_PATH</code>里，通常正常编译后都会存在。</li>
<li>确认包存在于<code>your_workspace/install/your_package</code>,确定安装到<code>install</code>目录下。</li>
<li>确认存在包配置文件，检查<code>share/your_package/cmake</code>里是否存在相关的<code>.cmake</code>文件。</li>
</ol>
<h2 id="find_package">find_package</h2>
<h3 id="find_package_1">find_package的查找原理</h3>
<p>find_package 命令的查找过程相当复杂，但可以概括为两个主要模式：模块模式（Module Mode）和配置模式（Config Mode）。CMake 会按顺序尝试这两种模式来查找包。</p>
<ol>
<li>
<p>模块模式 (Module Mode)</p>
<ul>
<li>原理: CMake 自身或第三方开发者提供了<code>Find&lt;PackageName&gt;.cmake</code>脚本。这些脚本包含了查找特定库（如 OpenCV）所需头文件和库文件的逻辑。</li>
<li>查找位置:<ul>
<li><code>CMAKE_MODULE_PATH</code>变量中指定的目录。</li>
<li>CMake 内置的模块目录，例如<code>/usr/share/cmake-&lt;version&gt;/Modules/</code>。</li>
</ul>
</li>
<li>如何确定: 如果<code>find_package(OpenCV)</code>成功，并且定义了 <code>OpenCV_INCLUDE_DIRS</code> 和 <code>OpenCV_LIBRARIES</code> 这样的变量，这说明使用了模块模式。</li>
</ul>
</li>
<li>
<p>配置模式 (Config Mode)</p>
<ul>
<li>原理: 库的开发者在安装时会生成 <code>&lt;PackageName&gt;Config.cmake</code> 或 <code>&lt;PackageName&gt;-config.cmake</code> 配置文件。这些文件包含了库的安装路径、头文件路径、库文件路径等信息。这种方式是现代 CMake 的推荐做法，因为它将配置信息与库本身一起安装，更加可靠。</li>
<li>查找位置:<ul>
<li>在 <code>CMAKE_PREFIX_PATH</code> 变量中指定的目录。</li>
<li>在环境变量中指定的目录，例如 <code>PATH</code>。</li>
<li>在标准的系统路径下，如 <code>/usr/local/</code>、<code>/usr/</code> 等。</li>
<li>在 ROS 中，catkin 会将工作区 (<code>devel</code> 或 <code>install</code> 目录) 自动添加到 <code>CMAKE_PREFIX_PATH</code>，这使得 <code>find_package</code> 能够找到 ROS 包。</li>
</ul>
</li>
<li>如何确定: 如果<code>find_package(Boost REQUIRED)</code> 成功，并且定义了 Boost::system 这样的导入目标，这意味使用了配置模式。导入目标是 CMake 推荐的现代链接方式，它将库的所有信息都封装在一个目标中。</li>
</ul>
</li>
</ol>
<h3 id="find_package_2">find_package的检索过程</h3>
<p>当你调用 <code>find_package(&lt;PackageName&gt; REQUIRED)</code> 时：</p>
<ul>
<li>CMake 会遍历 <code>CMAKE_PREFIX_PATH</code> 中的每一个路径。</li>
<li>对于每个路径，它会尝试在以下结构中查找 <code>*Config.cmake</code> 文件： <ul>
<li><code>&lt;prefix&gt;/share/&lt;PackageName&gt;/cmake/&lt;PackageName&gt;Config.cmake</code></li>
<li><code>&lt;prefix&gt;/lib/cmake/&lt;PackageName&gt;Config.cmake</code></li>
<li>等等。</li>
</ul>
</li>
<li>一旦找到匹配的 <code>*Config.cmake</code> 文件，它就会加载该文件。这个文件会设置一系列变量（例如 <code>moveit_visual_tools_INCLUDE_DIRS</code>、<code>moveit_visual_tools_LIBRARIES</code>）并可能定义导入目标，从而使得你的项目能够链接到该包。</li>
</ul>
<p>哪些包需要被添加到<code>find_package</code>: 如果你的程序使用了其他包的内容都需要写<code>find_package</code></p>
<h3 id="_2">手动添加查找目录</h3>
<p>默认的查找路径有：</p>
<ul>
<li><code>CMAKE_PREFIX_PATH</code></li>
<li><code>/usr/local/lib</code></li>
<li><code>/usr/lib</code></li>
<li><code>/usr/local/include</code></li>
<li><code>/usr/include</code></li>
</ul>
<p>手动在<code>CmakeLists.txt</code>中添加查找路径：</p>
<pre><code># 设置 OpenCV 的安装路径# 将 /path/to/your/opencv/install 替换为您实际的安装路径
set(OpenCV_DIR &quot;/path/to/your/opencv/install/lib/cmake/opencv4&quot;)  

# 或者使用 CMAKE_PREFIX_PATH，这会搜索指定目录下的 share/ 或 lib/cmake/ 子目录
set(CMAKE_PREFIX_PATH &quot;/path/to/your/opencv/install&quot;)

# 亦或者
find_package(OpenCV REQUIRED
    HINTS &quot;/path/to/opencv&quot;
    &quot;/another/path/to/search&quot;
)
</code></pre>
<h3 id="_3">验证查找到的库</h3>
<pre><code># 打印出找到的变量，用于验证
message(STATUS &quot;OpenCV include directories：${OpenCV_INCLUDE_DIRS}&quot;) 
message(STATUS &quot;OpenCV libraries: ${OpenCV_LIBRARIES}&quot;)
</code></pre>
<h3 id="_4">环境变量</h3>
<p><code>find_package</code>在寻找和导入包时会同时生成环境变量，比如<code>OpenCV_INCLUDE_DIRS</code>和<code>OpenCV_LIBRARIES</code>。</p>
<pre><code># 这一步会生成catkin相关的变量
find_package(catkin REQUIRED COMPONENTS
    roscpp
    rospy
    # ...
)

# 此时会生成：
# - catkin_INCLUDE_DIRS
# - catkin_LIBRARIES
# - catkin_LIBRARY_DIRS
# - catkin_DEPENDS
</code></pre>
<p>同时，也支持在CMakeLists.txt中手动设置环境变量</p>
<pre><code># catkin_INCLUDE_DIRS 包含了所有依赖包的头文件目录路径
# 例如可能包含：
# /opt/ros/noetic/include  # ROS核心头文件
# /usr/include/pcl-1.10    # PCL头文件
# /usr/include/opencv4     # OpenCV头文件

# 使用方式：
include_directories(
    ${catkin_INCLUDE_DIRS}  # 让编译器知道在哪里找头文件
)


# catkin_LIBRARIES 包含了所有依赖包的库文件列表
# 例如：
# libroscpp.so
# libroslib.so
# libopencv_core.so

# 使用方式：
target_link_libraries(你的程序名称
    ${catkin_LIBRARIES}  # 链接需要的库文件
)


# catkin_LIBRARY_DIRS 包含库文件所在的目录路径
# 例如：
# /opt/ros/noetic/lib
# /usr/local/lib

# 使用方式：
link_directories(
    ${catkin_LIBRARY_DIRS}  # 告诉链接器在哪里找库文件
)


# catkin_DEPENDS 记录了当前包依赖的其他catkin包
# 例如：roscpp rospy std_msgs

# 使用方式：
catkin_package(
    CATKIN_DEPENDS ${catkin_DEPENDS}  # 声明包的依赖关系
)
</code></pre>
<h2 id="add_dependencies">add_dependencies</h2>
<p><code>add_dependencies(...)</code>的作用是在构建系统中建立目标之间的依赖关系。它主要用来确保一个目标（比如一个可执行文件或库）在另一个目标之前被构建。<code>add_dependencies()</code>关注的是编译时的依赖，即在编译一个目标之前，需要先完成哪些其他目标的编译。</p>
<p><code>add_dependencies()</code>主要用于以下两种情况：</p>
<ol>
<li>代码生成和编译顺序: 当你的项目需要先生成某些文件（比如消息头文件、服务头文件）然后才能编译依赖这些文件的源代码时，你需要使<code>add_dependencies()</code>。</li>
<li>强制编译顺序: 某些情况下，即使没有直接的代码依赖，你也可能需要强制 CMake 先编译某个目标，以满足特定的构建流程要求。</li>
</ol>
<p>你需要在以下情况中添加 <code>add_dependencies()</code>：</p>
<ul>
<li>ROS 消息和服务: 这是在 ROS 项目中最常见的使用场景。当你的节点使用了自定义的消息或服务文件时，catkin 需要先生成这些文件的 C++ 或 Python 头文件。你需要确保在编译你的节点之前，这些头文件已经被生成。</li>
<li>与其他目标存在非代码依赖: 如果一个目标的生成需要另一个目标的输出文件。
<code>add_dependencies(...)</code>的作用是在构建系统中建立目标之间的依赖关系。它主要用来确保一个目标（比如一个可执行文件或库）在另一个目标之前被构建。<code>add_dependencies()</code>关注的是编译时的依赖，即在编译一个目标之前，需要先完成哪些其他目标的编译。</li>
</ul>
<h2 id="target_link_libraries">target_link_libraries</h2>
<p><code>target_link_libraries</code>的作用是链接库文件到可执行文件或库文件。它的主要目的是告诉编译器在编译你的程序时需要使用哪些已经编译好的库，以便程序可以调用这些库中定义的函数和类。<code>target_link_libraries()</code> 关注的是链接时的依赖，即程序运行时需要哪些库文件。</p>
<p><code>target_link_libraries</code> 主要用于以下几个方面：</p>
<ol>
<li>链接 ROS 库: 当你的节点需要使用 ROS 提供的功能（例如发布/订阅话题、调用服务等）时，你需要链接 ROS 相关的库。例如，rospy、roscpp、message_generation 等。</li>
<li>链接外部库: 如果你的程序使用了非 ROS 的第三方库，比如 OpenCV、PCL 等，你也需要使用 <code>target_link_libraries</code> 来链接这些库，这样你的程序才能正常调用它们提供的功能。</li>
<li>链接自定义库: 当你的项目中包含自己编写的库（add_library 创建的），并且你想在另一个可执行文件或库中使用它时，同样需要使用 <code>target_link_libraries</code> 来进行链接。</li>
</ol>
<p>需要在以下情况中添加 target_link_libraries：</p>
<ul>
<li>创建可执行文件: 当你使用<code>add_executable</code>创建一个可执行文件时，如果这个节点需要依赖任何库，你都必须在 <code>target_link_libraries</code> 中指定这些库。</li>
<li>创建库: 当你使用 <code>add_library</code> 创建一个库时，如果这个库需要依赖其他库，你也需要使用 <code>target_link_libraries</code> 来链接它们。</li>
</ul>
<h3 id="ros">链接ROS库</h3>
<pre><code># 创建一个名为 &quot;my_ros_node&quot; 的可执行文件
add_executable(my_ros_node src/my_ros_node.cpp)

# 链接 ROS 和 catkin 相关的库
target_link_libraries(my_ros_node
  ${catkin_LIBRARIES}
)
</code></pre>
<p><code>catkin_LIBRARIES</code> 是一个由 <code>catkin_make</code> 自动生成的变量，它包含了所有在 <code>package.xml</code> 文件中通过 <code>&lt;depend&gt;</code>标签声明的 ROS 依赖项。你无需手动列出 <code>roscpp</code>、<code>message_generation</code> 等库，catkin 会为你处理。你只需确保你的 <code>package.xml</code> 文件中的依赖项是正确的。</p>
<h3 id="_5">链接外部库</h3>
<pre><code># 找到 OpenCV 包
find_package(OpenCV REQUIRED)

# 创建一个名为 &quot;image_processor&quot; 的可执行文件
add_executable(image_processor src/image_processor.cpp)

# 链接 ROS 库和 OpenCV 库
target_link_libraries(image_processor
  ${catkin_LIBRARIES}
  ${OpenCV_LIBRARIES}
)
</code></pre>
<p>在<code>target_link_libraries</code>填写库的路径。确定库的变量或者路径的方法如下：</p>
<ol>
<li>使用 <code>find_package()</code>： 首先，在 <code>CMakeLists.txt</code> 中使用 <code>find_package(OpenCV REQUIRED)</code> 来找到并加载 OpenCV 库。</li>
<li>查看 <code>find_package</code> 文档： 几乎所有主流库的 <code>find_package</code> 模块都会定义一个或多个变量，其中通常会有一个 <code>_LIBRARIES</code> 变量，包含了链接所需的库文件路径。对于 OpenCV，这个变量就是 <code>OpenCV_LIBRARIES</code>。</li>
<li>检查库的安装路径： 如果 <code>find_package</code> 失败，你需要确保该库已经正确安装在你的系统上。你可以在 <code>/usr/lib/</code> 或 <code>/usr/local/lib/</code> 目录下查找库文件的名称（例如 <code>libopencv_core.so</code>）。</li>
</ol>
<h3 id="_6">链接自定义库</h3>
<pre><code># 1. 创建自定义库
add_library(common_utils src/common_utils.cpp)

# 2. 创建一个名为 &quot;main_app&quot; 的可执行文件
add_executable(main_app src/main_app.cpp)

# 3. 链接 ROS 库和自定义库
target_link_libraries(main_app
  ${catkin_LIBRARIES}
  common_utils
)
</code></pre>
<p>配置方法：</p>
<ol>
<li>使用 <code>add_library()</code> 定义： 当你使用 <code>add_library(common_utils ...)</code> 创建库时，<code>common_utils</code> 就是这个库在 <code>CMakeLists.txt</code> 中的逻辑名称。</li>
<li>直接引用： 在 <code>target_link_libraries</code> 中，你可以直接使用这个逻辑名称来链接你的自定义库。CMake 会自动处理库文件的路径和依赖关系。</li>
</ol>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  回到页面顶部
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../..", "features": ["search.suggest", "search.highlight", "navigation.tabs", "navigation.top", "toc.follow", "content.code.copy"], "search": "../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>